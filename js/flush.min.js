/*START---获取项目根路径*/
var $ctx = "";
try {
	$ctx = window.location.href.substring(
		window.location.href.indexOf(window.location.hostname) + window.location.hostname.length,
		window.location.href.indexOf('/res/'));
}catch (e){}
/*END---获取项目根路径*/
;(function (global, undefined) {
	"use strict";
	try {
		if (window.localStorage) {
			var xhr = new XMLHttpRequest;
			xhr.open('get', $ctx+'/res/version.min.js?_t=' + new Date().getTime());
			xhr.onreadystatechange = function () {
				if (xhr.readyState == 4) {
					if (xhr.status == 200) {
						var _cx_version_value = xhr.responseText;
						if (_cx_version_value) {
							var _cx_version_key = "_cx_version";
							var isFulsh = true;
							var cxVersionValue = window.localStorage.getItem(_cx_version_key);
							if (cxVersionValue && cxVersionValue == _cx_version_value) {
								isFulsh = false;
							}
							if (isFulsh) {
								window.localStorage.setItem(_cx_version_key, _cx_version_value);
								if (window.location.href.indexOf("?") == -1) {
									window.location.replace(window.location.href + "?_t=" + _cx_version_value);
								} else if (window.location.href.indexOf("_t=") == -1) {
									window.location.replace(window.location.href + "&_t=" + _cx_version_value);
								}
							}
						}
					}
				}
			};
			xhr.send(null);
		}
	} catch (e) {
		console.error(e);
	}
})(window);